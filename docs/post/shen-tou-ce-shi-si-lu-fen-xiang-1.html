<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://github.githubassets.com/favicons/favicon.svg"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="分享讲稿如下：
渗透测试流程的步骤

信息收集的技巧和方法，怎么排除做到有效收集
信息收集平台  fofa shodan hunter 360 censys 奇安信 等
子域名平台、DNS解析平台 ip138 https://securitytrails.com/  subdomian https://dnsdumpster.com/ https://robtex.com/ https://netlas.io/ https://www.whoisxmlapi.com/ 等

外网打点 如何啃骨头 ，怎么突破（供应链，找相同的产品，边缘资产突破），打不动如何钓鱼，如何获取真实的办公网段  , dzm ->企业内网，怎么在实际的办公段获取有效的资产和数据
https://www.dynu.com/

权限获取

反弹shell 基础知识 （sh python nc 等 ，需要根据实际的情况去选择）
Webshell （国内常见的 webshell  管理工具 ，常见的 webshell 语言、类型 ， 内存马（常见内存马的编写， java 热加载内存马（运行中的 java tomcat class 修改） ，jar 包class替换 等））
二进制程序 现在流行的 c2框架 （cs 、sliver 、臭鼬、havoc、msf等 tls mtls ）以及他们常用的加密方法，部署模式，木马上线前的处理（分段下载，特侦混淆等）  常规木马（正反向） ，lib库（dll），shellcodeloader shellcode ， 非常规木马编写思路举例（主程序不进行任何操作，单纯建立socket 连接， 所有的功能都由网络传输内存加载，可以自定义卸载安装功能，拓展功能，模块化的思想），httpd等开源或者有源码的程序后门，os 自带的相关组件或者功能的利用开发后门(bpf、ebpf ，iptables等 )，hook 的思想。">
<meta property="og:title" content="渗透测试思路分享1">
<meta property="og:description" content="分享讲稿如下：
渗透测试流程的步骤

信息收集的技巧和方法，怎么排除做到有效收集
信息收集平台  fofa shodan hunter 360 censys 奇安信 等
子域名平台、DNS解析平台 ip138 https://securitytrails.com/  subdomian https://dnsdumpster.com/ https://robtex.com/ https://netlas.io/ https://www.whoisxmlapi.com/ 等

外网打点 如何啃骨头 ，怎么突破（供应链，找相同的产品，边缘资产突破），打不动如何钓鱼，如何获取真实的办公网段  , dzm ->企业内网，怎么在实际的办公段获取有效的资产和数据
https://www.dynu.com/

权限获取

反弹shell 基础知识 （sh python nc 等 ，需要根据实际的情况去选择）
Webshell （国内常见的 webshell  管理工具 ，常见的 webshell 语言、类型 ， 内存马（常见内存马的编写， java 热加载内存马（运行中的 java tomcat class 修改） ，jar 包class替换 等））
二进制程序 现在流行的 c2框架 （cs 、sliver 、臭鼬、havoc、msf等 tls mtls ）以及他们常用的加密方法，部署模式，木马上线前的处理（分段下载，特侦混淆等）  常规木马（正反向） ，lib库（dll），shellcodeloader shellcode ， 非常规木马编写思路举例（主程序不进行任何操作，单纯建立socket 连接， 所有的功能都由网络传输内存加载，可以自定义卸载安装功能，拓展功能，模块化的思想），httpd等开源或者有源码的程序后门，os 自带的相关组件或者功能的利用开发后门(bpf、ebpf ，iptables等 )，hook 的思想。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://JiangHuYeYu001.github.io/post/shen-tou-ce-shi-si-lu-fen-xiang-1.html">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg">
<title>渗透测试思路分享1</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}

</style>




<body>
    <div id="header">
<h1 class="postTitle">渗透测试思路分享1</h1>
<div class="title-right">
    <a href="https://JiangHuYeYu001.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/JiangHuYeYu001/JiangHuYeYu001.github.io/issues/21" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><p>分享讲稿如下：<br>
渗透测试流程的步骤</p>
<p>信息收集的技巧和方法，怎么排除做到有效收集<br>
信息收集平台  fofa shodan hunter 360 censys 奇安信 等<br>
子域名平台、DNS解析平台 ip138 <a href="https://securitytrails.com/" rel="nofollow">https://securitytrails.com/</a>  subdomian <a href="https://dnsdumpster.com/" rel="nofollow">https://dnsdumpster.com/</a> <a href="https://robtex.com/" rel="nofollow">https://robtex.com/</a> <a href="https://netlas.io/" rel="nofollow">https://netlas.io/</a> <a href="https://www.whoisxmlapi.com/" rel="nofollow">https://www.whoisxmlapi.com/</a> 等</p>
<p>外网打点 如何啃骨头 ，怎么突破（供应链，找相同的产品，边缘资产突破），打不动如何钓鱼，如何获取真实的办公网段  , dzm -&gt;企业内网，怎么在实际的办公段获取有效的资产和数据<br>
<a href="https://www.dynu.com/" rel="nofollow">https://www.dynu.com/</a></p>
<p>权限获取</p>
<p>反弹shell 基础知识 （sh python nc 等 ，需要根据实际的情况去选择）<br>
Webshell （国内常见的 webshell  管理工具 ，常见的 webshell 语言、类型 ， 内存马（常见内存马的编写， java 热加载内存马（运行中的 java tomcat class 修改） ，jar 包class替换 等））<br>
二进制程序 现在流行的 c2框架 （cs 、sliver 、臭鼬、havoc、msf等 tls mtls ）以及他们常用的加密方法，部署模式，木马上线前的处理（分段下载，特侦混淆等）  常规木马（正反向） ，lib库（dll），shellcodeloader shellcode ， 非常规木马编写思路举例（主程序不进行任何操作，单纯建立socket 连接， 所有的功能都由网络传输内存加载，可以自定义卸载安装功能，拓展功能，模块化的思想），httpd等开源或者有源码的程序后门，os 自带的相关组件或者功能的利用开发后门(bpf、ebpf ，iptables等 )，hook 的思想。<br>
内核（驱动）模块<br>
Linux 内核后门 （Rootkit）<br>
Windows 驱动</p>
<p>Elfloader <a href="https://github.com/MikhailProg/elf">https://github.com/MikhailProg/elf</a>  <a href="https://github.com/weizhiao/rust-elfloader">https://github.com/weizhiao/rust-elfloader</a><br>
Inject so   <a href="https://github.com/Rhydon1337/linux-kernel-so-injector">https://github.com/Rhydon1337/linux-kernel-so-injector</a> <a href="https://github.com/vikasnkumar/hotpatch">https://github.com/vikasnkumar/hotpatch</a></p>
<p>权限维持（痕迹清理）<br>
提权<br>
驻留<br>
免杀<br>
最好 加上 开启堆栈保护、反调试、av检测和虚拟环境（沙箱）检查，几行代码的事情<br>
杀软启发式引擎常见的检测手段：<br>
循环解密行为、读取运行设备名称、读取加密器的 GUID、连接随机域名、读取 Windows 安装日期、删除可执行文件、在二进制文件内存中搜索可用的IP地址、修改代理设置、在运行的进程中安装HOOKS或PATCHES、往浏览器中注入代码、注入远程进程、查询进程信息、设置过程错误模式以覆盖错误窗口、异常熵的出现、检测杀软的存在、对特定的注册表项变动情况进行监控、包含提权的能力、修改软件的相关限制策略、读取系统/视频 BIOS 版本、PE文件头中的结束字节异常、创建受保护的内存区域、创建大量进程、企图进行长时间休眠、不常用的字节、读取 Windows产品ID、包含循环解密、包含启动或操作设备的驱动程序的能力、包含阻止用户进行干扰的能力  等等</p>
<p>白加黑上线，白名单签名，降低熵值，避免常见的Windows api ，多线程，dll劫持，自定义功能，压缩二进制文件体积，进程注入，通过网络传输内存加载  ，反射（断链），Windows漏洞 ，致盲（down）av EDR等<br>
总结的全面的新手向文章（<a href="https://xz.aliyun.com/news/13652%EF%BC%8Chttps://kagty1.github.io/2025/05/30/12%E5%A4%A9-%E4%BB%8E0%E5%BC%80%E5%A7%8B%E7%9A%84%E5%85%8D%E6%9D%80%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/%EF%BC%89" rel="nofollow">https://xz.aliyun.com/news/13652，https://kagty1.github.io/2025/05/30/12天-从0开始的免杀学习汇总/）</a><br>
横向<br>
Dmz 区域突破，边界网关</p>
<p>内网主机信息收集<br>
Windows 域内横向<br>
堡垒机、vcenter、其它集中管控程序</p>
<p>代码审计<br>
对于有源码的项目是否要本地部署<br>
怎么通过特征去判断组件和相应的版本号<br>
有没有专用的审计虚拟机<br>
--------------------------（markdown用的不熟的分割线）<br>
什么是ASN:<br>
原语音：<br>
大家知不知道这个 ASN 这个东西<br>
ASN就是一个企业，他们每个就是大的一点的企业，他们都会有一个 ASN 的这个区域断了，就是他们会11大段 I IP 都会分在这一个 ASN 上，我给。你们找看一下，你们是只应该会之前会有过有看过可能没关注过这个东西。<br>
这个地方这个东西一般 ASN 号除了这种运营商之外，一个正常的企业，它都会有自己的 ASN 但这 ASN 并不一定是一个固定的，它可能会给它一个很多个。这个企业所属的 ASN 里面的 IP 基本上都是他们自己的。我们如果是只知道，但是我们不知道他 ip 段用大或者它这个到底有多少个 IP 的话，我们可以通过 ASN 来搜索一下这个。因为 ASN 一般是和组织名就是很绑定的它 ASN 肯定就是啥 CF 的，所以这也是我们一个。在渗透测试的时候，在信息收集的时候，我们可以通过 asn 去寻找很多的信息。<br>
解读版：<br>
大一点的企业都有ASN的区域。<br>
他们的ip会分配在一个ASN上。<br>
ASN除了运营商外，一个正常的企业会有自己的ASN但是不一定固定，可能会有多个。一个企业所属的ASN里面的IP基本上都是属于这个企业的。如果我们只知道这个ASN，但是不知道IP段多少个，可以用ASN搜寻。</p>
<p>补充知识：<br>
ASN：概念与应用详解<br>
一、ASN基本概念</p>
<p>ASN（Autonomous System Number，自治系统号）是互联网中用于标识独立路由策略域的唯一编号，每个自治系统代表一个由单一管理机构控制的网络集合（如企业、运营商或大学网络）。大公司拥有自己的ASN是其网络基础设施管理的重要组成部分。</p>
<p>二、大公司ASN的核心特点<br>
全球唯一标识‌：每个ASN在全球范围内都是唯一的，由地区互联网注册管理机构（RIR）统一分配<br>
路由控制基础‌：在BGP（边界网关协议）中，ASN帮助路由器识别网络流量的来源和路径<br>
多ASN管理‌：大型企业通常拥有多个ASN，用于不同业务区域或功能划分<br>
精细路由策略‌：通过ASN实现流量路径选择和负载均衡<br>
三、知名大公司的ASN应用案例</p>
<ol>
<li>Google<br>
使用ASN管理全球数据中心网络<br>
通过BGP实现高效的内容分发<br>
提供Cloud NAT等服务，优化网络流量</li>
<li>Facebook<br>
拥有多个ASN管理其全球社交网络基础设施<br>
2021年因BGP配置错误导致全球服务中断事件凸显ASN重要性<br>
使用ASN实现多宿主连接，提高网络可靠性</li>
<li>Amazon AWS<br>
提供BYOASN（自带自治系统编号）服务<br>
允许客户使用自己的公有ASN而非AWS ASN<br>
通过ASN实现VPC网络与外部网络的互联<br>
四、大公司ASN的申请与管理</li>
</ol>
<p>申请条件‌：</p>
<p>企业需证明其网络规模和管理能力<br>
通常需要拥有至少一个IPv4或IPv6地址块</p>
<p>申请流程‌：</p>
<p>向地区互联网注册机构（RIR）提交申请<br>
提供企业网络架构和路由策略说明<br>
经过审核后获得分配的ASN</p>
<p>管理特点‌：</p>
<p>大型企业通常有专门的网络团队管理ASN<br>
通过路由反射器或联盟实现AS间路由优化<br>
定期更新路由策略以适应业务变化<br>
五、ASN对大公司的价值<br>
网络自主性‌：完全控制自己的网络路由策略<br>
性能优化‌：通过精细路由选择提高网络性能<br>
可靠性提升‌：实现多宿主连接，增强网络容灾能力<br>
安全控制‌：基于ASN实施更精确的网络访问控制</p>
<p>大公司的ASN是其网络基础设施的核心组成部分，对于保障全球业务的高效、稳定运行起着至关重要的作用。</p>
<p>子域名的话，我不太清楚大家平时用哪些平台，你们用的都是我列出来这些的话基本上都是挺好的了，就基本上这几个就挺全了像。这个我最常用的就是这个，但是现在它注册的话，需要企业的邮箱才能注册的不是太好注册的就是在它会，你比如说我给一个 IP 给它的时候。你给一个 ip 给他，会给我把这个域名反解析出来，然后我给域名的时候，他会把所有的基本上所有的就是他的 DN 他的 DNS 服务器能解析到的那些域名全部给你列出来，然后还会把那个历史记录就是什么时候绑定的，然后到什么，现在是不是还绑定着这个 IP？它会把这些都给列出来，这个就可以让我们怎么说查询以前的绑定的历史可能会绑定在他以前，比如说他绑定在办公段，然后后面移到了 DMZ 区，最后又移到了他的云上去，我们可以通过这个获取到一些它历史的一些 IP，还有一个就是我们可以排除一些，比如说。像他以前绑定的这个 IP 他不用了，然后我们看了 S 段没有了之后就直接可以排除这个 IP 了，和他不相关的，这样我们可以就是信息收集的时候就减少了很多没有必要的这种时间的浪费。<br>
解读版：<br>
子域名用这些平台就足够了。<br>
给ip可以查历史dns解析的记录。</p>
<p>ok 第一个性能测试的流程就是第一个记录信息收集嘛，信息收集差不多，没有什么太多的可讲的东西了，就是看你如何通过这些平台，或者你已知的一些信息能收集到他们更多的信息。</p>
<p>我想一下就是我那对昨天那天硕宇给我发了一个问题，就是如何通过这些我看一下，对通过我们信息收集的时候的这些收集到的东西去判断一个它的特征值或者是什么来判断它用的到底是什么东西？其实很多你像这种平台它都会给你列出来，它到底是啥了？比如说它用的或者是。HTTP D，或者是这些简单的一些外部服务或者 tomcat 之类的，我们需要怎么继续对它进行一个精确的？那就是判断的，可以用一些那种谷歌浏览器或者火狐的这些，有一些那些浏览器的插件，它可以识别出来，你到底用的是什么版本或者是。</p>
<p>是什么中间件这些东西，这个插件大家在用的时候就可以多多看一下，在具体就是要渗透的，要渗透之前，我们去确定它的时候像一些开源的东西，我们可以通过一些。它的特征值就是在它前端展示的一些东西，或者是它代码里存在的东西。比如说我们在看 HTTP，就比如说像它如果不隐藏这种 HTTP D 或者 nginx 它的返回头的话，它的返回头里会把它的具体的版本信息给明确的标注出来。你像最常见的就是 PHP。他如果你不改的话，他在请求头的，他在返回头里面一定会给你一个 PHP 的标识。</p>
<p>你像就如果他正的一般是会可以隐藏掉的就自己改配置的时候是可以隐藏掉的，但是大部分的企业他们没有那种安全意识还是很正常的一眼就在这个感应头里面就看到了。包括他用什么产品之类的，是很好判断的，像一些，更就是你觉得你判断不出来的，你只能通过一些。就他返回的这种前端界前端页面里面的代码，然后去自己去做判断。另一个就是你通过那种子域名不是文件目录的这种扫描或者是文件的扫描，看一下他能不能泄露一些版本信息<br>
解读版：<br>
找到浏览器对应的插件来解决掉这个前端流量的特征检测问题。</p>
<p>是几个判断的方法？然后我们就是下一个就是外网打点了外网打点，其实我们在工作中遇到的比较多的情况，就是有很多时候我们碰到了一个网站，或者是碰到了一个产品，我们是没有它的源码的，我们也没有任何的就是一看见它没有任何的思路，我们肯定可能是要进行一个黑盒的，对它进行一个黑盒的测试，拿到这个网站，我们需要找到哪到底哪里有。可以攻击的点，或者是可以被我们利用到的点。如果我们实在是找不到的情况下，我们要怎么办？如果它上面布的就是这种常见的 N day 或者一 day 的这种产品，那还好说我们用 G 叉 P 或者直接打一遍就可以了。绝大部分情况下可能我们在这个时候是碰到的是那种我们都不知道的东西，我们没见过的一些。产品或者是他们自己写的一些外包网站，那这样的话，我们就只能通过什么，通过想办法去获得这个产品的一些源码，或者是类似的一些他们的公司。或者是通过供应链去直接找到这种给他们提供服务的这些产品。我最常用的就是通过供应链去打一些企业，然后或者找一些和这个企业上面布的产品或者服务相同的一些公司，然后去找那种相对比较薄弱的公司，就是他们的防护很差劲的，他们几乎没有什么防护的那种公司，把公司拿下来，然后把产品。</p>
<p>报回来，然后进行代码审计，这是我比较常用的一个思路，然后这个供应链就大家肯定也都知道，就是给他提供服务的这些公司，我们直接去弄这些公司。然后你像正常的公一般给他们提供服务的公司，他肯定都不是一次性提供服务的，他肯定持续的肯定会有一个人在那里一直驻场，或者是持续给他们运维产品升级之类的，还有很多，就是可以直接通过升级去下发一些。</p>
<p>我们控他们的这些主机就是我们目标的一些主控目标的一些主机，像工作的时候，我们在很多时候就是拿到了很多这种供应链公司的所有，它的整个的权限，然后通过它的更新服务器去对我们。想要打的目标直接下发更新的程序，然后让下发的时候把我们的一些码或者是一些想要的东西直接给它插进去。然后让那个目标直接上线过来，这是最简单的方式，但是在打供应链的时候是最难的供应链不是那么好打，然后另一个就是。供应链被查了一条链就全部都断了，这个是可能是比较就是你在渗透的时候可能需要注意的点，然后还有一个就是你怎么？知道就是在打点的时候，你怎么知道他用的什么产品，然后怎么去确定他的供应链是哪个，就是你前期信息收集的时候，所要收集到的东西了。<br>
解读版：<br>
外网打点这里，要么找CMS源码，要么去打供应链公司的内网机器。（需要找到更新服务器）</p>
<p>邵盛祥 12:04<br>
另一个就是我们这个边缘资产的这个突破的话，我其实用到的不是太多，因为很多都是从正面打进去的，从这些边缘资产，或者你这种子域名里面收集出来的一些边缘资产打过去的情况不是太多，因为。一般资产突破了之后还会需要再继续往他的核心资产去突破，然后才能可能到他的内网端，然后他可能像我们才有会拿到他的一些预控，威森特这些堡垒机之类的这些。金融管控的东西才能控到他们整个公司或者说政府的某个部门。<br>
邵盛祥 12:43<br>
这是一个思路，就是我们在弄他的一些网站，或者是他的一些核心的资产的时候，我们弄不下来。实在是没有办法了，然后我们可以通过这种边缘资产的去一点一点往核心的去突破吧，就是大家在如果大家以后从事相关的工作，或者是你们在后面的比赛，或者是啥的，遇到了这种类似的情况的时候，就是其实你可能比赛的时候他是会给你设定好的路线，你如果突破不了，就突破不了，但是自己在工作或者是。自己在怎么说测试或者是给别人打网站或者做 SRC 的时候，你可能需要从边缘资产的突破的时候可能更简单一点。电子厂一般防护的没有那么严，然后根据一些工作经验来看，他们这个边缘资产可能有一些有很多他都不会放在放一些安全设备啥的他。几乎相当于那种没有什么安全设备，没有什么安全管理的这种状态是打他的话还是比较轻松的。<br>
解读版：边缘资产若很少用。可能会遇到堡垒机之类的。金融的不好打，可能电子厂那些好打。</p>
<p>然后大家就是做渗透嘛，做这种外网打点的时候或者是一点思路没有了，就是永远都绕不开的就是钓鱼。其实我们在平时大家可以看一看，就是现在爆出来的这种通过钓鱼弄到的一些信息，很多的时候都是他们员工没有任何的安全意识所造成的。然后我们要调的大部分的员工就是要发这种调研邮件的话就是要大量发频繁发，然后通过不同的 IP 通过不同的服务器去给他们发通过不同的邮箱去发。他总会有人上钩的，因为你给一个公司在钓鱼的时候，他们很多人都是不会看这些东西的，你做的钓鱼网站越像说明你。他们越不会去关注这些东西钓鱼不也并不一定只有这种通过邮件或者通过邮件方式去钓鱼，还可以做他们的网站，或者是第三方网站，比如说我们他们的公司的官网上。</p>
<p>可以通过这种 QQQQ，或者是微信这种东西有一个跳转链接，我们可以给他模仿出来一个假网站去做钓鱼，然后让他比如给他发邮件的时候告诉他<br>
网站对，然后让他们点跳到我们的网站，然后再打打印账号密码，打账号密码的时候我们可以抓一下他们的这些账号密码，然后实际的时候我们在发包的时候会发到他正常的一个跳转的这个网站上去就可以了。</p>
<p>是很常见的一种钓鱼的方式，你看你可以看一下，就是5月份五6月份的时候，然后8月份爆出来的一个所谓的朝鲜黑客就是。那个所谓的朝鲜黑客，然后打韩国的政府的那些也可以看一下他们做的那些钓鱼网站之类的，他们做的就是像那种韩国比较大的一个类似我们这种即时通讯的这种东西。qq 微信直接就是他那个叫什么 kakaotalk 这个东西。然后他就是做了一个模仿的网站，然后去调他们韩国政府的一些工作人员，然后成功率还是挺高的，就是不管是企业还是政府的这种东西，大家钓鱼的时候其实是很简单的，就没有想象中的那么难。</p>
<p>但是在国内，大家如果没有授权的话，就不要尽量不要做这种钓鱼的操作，其实这个是违法的事情，然后就是如何获取真实的办公网段。这个东西我在前面信息收集的时候就刚才就给大家说了很多的是他的办公网段和他的这个外部资产就是云上的资产在一个段的我们如何获取到这种真正的办公网段，这前面刚才也说过了，通过。发邮件这种形式是可以获取到的另一个我们。像他们的油服企业最常用的，如果是他们自己部署在企业自己企业内部的情况下，这种油服肯定会布在他们的这个办公网站的这个地方，然后通过转发过去的是班会一般很快就会弄到的，然后另一个就是。</p>
<p>解读版：菜霸的故事之不要去钓鱼。<br>
钓鱼用那些常规的web攻击方法就行。</p>
<p>你像一些一些企业给别人提供一些下载的一些下载的这些服务，或者是让他们下一些更新包的。就是他们不通过这种线上更新，他们只通过这种你去更新服务器，然后去下载东西，这种的更新的，他们很多的也都会在他们一个办公网站，但是其实这个。它这个办公网站会有一个大部分的企业会做一个隔离的情况，就是它会把 DMZ 区和 DMZ 区隔出来，然后。企业内网是不能 DMZ 区是不能直接到企业内网的，然后企业内网，但是可以访问它的 DMZ 区，像我们这种情况下。就是涉及到后面的我们横向的内容了，我们如何通过这个我们拿到了 DMZ 区的一个权限之后。到他的企业内网里面，或者是说我们像那种政府的我们通过企政府的这种平台弄到了之后，怎么通过这个 DMZ 区到它的政府的内网，如果它是硬隔离的情况下，我们几乎就没有办法去。</p>
<p>做突破了，除非我们可以做那种带的 USB，让他通过一台你可以看一下他的这个这台机子的每天的这个 USB 的拔插记录。或者是通过它连接一些 wifi 的记录获取一下它，看一下它到底是不是会有一个通过这种介质出通过硬盘介质传播或者是。CD 介质传播或者是这种 wifi 介质的传播，或者是蓝牙的介质的这种传播，他可能不会通过这种网络的这种传播。所以。你可能只能通过做 better us better usb 去，在它的内就是硬隔离的内网里面做渗透，就是先在它有网络的这台机子上给它插了一个。带了 USB 之后，然后在它把这个 USB 拔下插到它内网机器的时候，让它让 BAD USB 自己在他内网里做横向，然后把所有收集到的信息存到这个 USB 里面，然后等他再从内网的机子上拔下来，插回去的时候。我们再从这个 USB 里获取信息，这种硬隔离的没有什么好的办法，你又不可能去禁言渗透这种的，所以你只能通过这种通像通过网络控到了这个主机，然后去给它做这种白的 USB 的去。给他做处理了，没有什么其他更好的办法，目前就是我在实际工作中遇到的情况，就是这种的不太有很好的这种办法去给他做，然后在。</p>
<p>解读版：打企业的隔离物品如何处理。</p>
<p>我们就是如何在办公在里面获取有效的资产和数据，这就涉及到一个内网扫描的东西，怎么看怎么去隐藏我们自己的这种扫描的信息。然后我们比如说大家很常用的在国内的话，就像 fscan 这些。它的特征都是很明显的，我们怎么对还有 scan 之类的这种扫描工具进行爱开，或者是说我们自己做一个这种扫描工具，然后怎么把这个扫描工具？过个免杀之后让他检测不出来，然后我们在扫描的时候如何减少我们的扫描的特征，对服务的时，还得提高我们队服。</p>
<p>解读版：脚本启动。</p>
<p>要给大家说的一个东西，这个是外网打点的时候可能遇到的一些东西，这个地方是可以给他，就是我刚才给大家说，就是发邮件的时候可以通过这个网站给发一个临时的邮件，他会看到一个发邮件的信息。他会看到一个发邮件的信息，然后会显示一下他是从哪个服务器过来的就是你，你不需要就是自己搭一个邮件服务器，然后通过邮件服务器上的。内容看别人的就是他的发过来 IP 或者是啥的，你可以通过很多的那种临时邮箱，他都会可以解出来这种邮件的源码的。如果大家对那个。邮件钓鱼，或者是邮件获取他一些信息的，这种比较感兴趣的，大家可以看一看邮件的源码的内容。我不知道大家有没有研究过那种邮件，它在交互的时候发的信息是啥，应该都看过吧，我记得可能咱们学校的这个考试的时候考那个考研考试的时候会有吧，那个发邮件的我记得上年的好像就是考的这个东西。大家可以关注一下如何在这种邮件里面插一些信息，然后获取到我们想要的一些信息。</p>
<p>解读版：上邮箱。<br>
外网打点的话，就你能遇到这种 N day，或者是其他的一些就是常见的漏洞网的话是最好的。因为你一下就把它一下就打进去了，但是如果遇不见的话，就是肯定是需要换一下方向，然后想一下就是我刚才说的这些，但是你是如果能信前面信息收集比较全面的话，你真的能收集到他的脆弱资产，或者是他的一些。没有经过更新的存在漏洞的这些东西，那你就很简单，就把它打进去了，但是突破不掉的话，那你就得想办法拖他的产品拖，然后打供应链了，拖产品的核心目的还是去挖洞渗透的。核心还是得有洞，没有洞的话就很难继续下去，你们没有洞，我们怎么可能空到他的东西，所以大家就是想做深度测试的话，还是要会一些代码审计的简单的代码审计最起码会吧，比如你如果在这个你黑盒的能力一点没有的话，你怎么去给这个做测试，你我叫什么？我连 sql 注入这种的地方，如果我找到了，我都不会注，那我怎么？继续打下去，不可能拓展出来，可能这些东西了，对，所以这个东西都是相辅相成的，你想渗透的好的话，你肯定还是需要有一定的代码审计的功底。<br>
解读版：提升代码审计和后端的黑盒功夫。</p>
<p>权限获取这一块肯定是外网打完点之后，我们如何把这个权限获取到权限有很多的。这种方法吧，你比如说我们这是 sql 注入的 sql，通过 sql 注入获取到这个主机权限的。然后通过这种命令执行。远程代码执行，然后还有通过文件上传，还有文件下载获取到它一些配置之后，我们做对应的。渗透的操作的，也可以，我们如果能找到这种文件下载的地方的话，任意文件下载的地方，我们可完完全可以通过这个点，然后就可以把它整个的产品全部就拖完了。<br>
解读版：一些方法和思路。</p>
<p>然后就是拖完了之后就是怎么获取这个权限了，通过这个我们拿到的洞，然后去拿到这台主机的权限就有很多，最简单的方式就是反弹。不过有可能有时候有一些机子，有一些设备，你比如说你可能会打了一个 IOT 的设备，它可能并不是叉8664的这种架构的东西，也可能用传统的那种反弹。B NB SH 这种东西它弹不回来。它里面没有这个东西，它你像那种 arm 的或者是 M IP S 的这种架构的，它可能你给一些这些反弹的命令的时候，它不存在它。弄不了可能我们需要根据实际的情况去获取到这个机子上的一些一些程序，你像有百分之。七八十的机子上都会有 python 写 linux 服务器，它都会有个 python，要么 python 二，要么 python 三 python 的这种反弹之后是最常见的了。然后 B in base 的也是最常见的，然后还有 NC 这些一些。</p>
<p>解读版：经验积累。</p>
<p>我们能遇到的就是你需要根据自己的实际情况去选择你到底使用什么反弹，而且一般情况下是不太推荐反弹的这个东西的，因为它这个是纯明文的东西，你弹过来，你俩的这个通信，它这个流量上是纯明文的你**所有的操作都是被它设备能看得一清二楚的。其实不是我不太很推荐这种反男权的这个东西，你除非很有必就是在开始获取权限的时候，你除非得去给他弹个射手回来执行一些命令之类的，否则的情况下，就大家尽量别做这种反弹射手的操作。不太安全，你自己可以，你比如说你上一个那种简单的反弹返联的这个码都可以，你稍微的在流量上就做一些加密的措施都可以的纯铭文的大家自己在测试着测试的时候可以。等一下可以抓包看一下这个流量太明显了，不推荐这种方式，然后另一个就是这个在国内，我感觉用的是最多的吧。</p>
<p>常见的 web shield 冰蝎已见哥斯拉，然后还有一个远古之神菜刀，这些东西就是大家是听的也非常多，然后遇见的也非常多，包括一些比打 CTF 比赛的时候，他可能会让你解一些常见的。</p>
<p>web shell 的这些管理工具的这些流量，我可以给大家稍微说一说。它的流量去怎么去隐藏吧，因为它这个4.0之后不是出了很多的。可以自定义这种加密的方法吗？我不知道大家自己有没有写过这个冰蝎的自定义的加密方法，包括自己有没有自己写过冰蝎就是魔改过冰蝎的码或者是冰蝎的这个。</p>
<p>魔改过冰蝎，其实大家如果模改过的话，模改过这个东西的话，你可能就是对它了解就更深入一些了，它其实很简单的，它就是一个 class loader？大家自己写的时候也是可以写成这样的，他在最开始的那个 GSP 就是一个简单的 class 的，然后再通过外国大家访问的时候你访问，比如说你执行命令的时候，他会把整个的。命令那一个 class 类，然后把你的命令插进去，然后执行就是简单的一个类加载，然后反射调用类加载，然后我们自己改的时候可以就完完全全的改成他这个样子。然后他在那个密码就是加密的方式那里，通常情况下大家都是单向的加密就是什么是单向的，就是我这边加的那边解那边加的，我这边解就是两个都是用的相同的。K 你像通常情况下都是来个 aes 或者是 ASC DC 这它那几种不同的模式。这是很常见的这种流量的特征了。现在的流量设备对于这种检测也是比较常见的，我推荐大家可以把它稍微改一下，就是它在它那个加密那里给改成一个。</p>
<p>解读版：看冰蝎的代码审计。</p></div>
<div style="font-size:small;margin-top:8px;float:right;">转载请注明出处</div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://JiangHuYeYu001.github.io">徐卿年的个人博客</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("11/20/2025"!=""){
    var startSite=new Date("11/20/2025");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);






</script>


</html>
